import{p as F,r as a,s as f,t as G,y as J,z as K,A as Q,E as U,c as W,a as s,j as Y,I as N}from"./index-b8e75f22.js";const ne=p=>{const{className:P,style:V,children:Z,value:$,defaultValue:ee,allowHalf:y,allowClear:E,count:S=5,size:A,spacing:b,icon:z,voidIcon:B,color:I,voidColor:T,readOnly:c,disabled:l,onChange:te,..._}=p,[d,j]=F(p,{initialValue:0}),g=a.useRef(0),o=a.useRef(),m=a.useRef([]),h=a.useRef([]),w=(e,t)=>{e===0&&(h.current=[]),h.current[e]=t},u=a.useRef([]),x=(e,t)=>{e===0&&(u.current=[]),u.current[e]=t},i=a.useRef(d),D=()=>{u.current.forEach((e,t)=>{const r=t+1-i.current;e.style.width=(r<=0?1:r>1?0:i.current%1)+"em"})},R=e=>{i.current=e,D()},L=f(()=>{c||l||(o.current&&(g.current=o.current.getBoundingClientRect().left),m.current=[],h.current.forEach((e,t)=>{const r=e.getBoundingClientRect();m.current[t]=[r.left,r.right]}))}),C=({x:e})=>{if(c||l)return;const t=e-g.current,r=m.current;if(t<0){R(E?0:y?.5:1);return}for(let n=r.length-1;n>=0;n--){const[v,q]=r[n];if(e>=v){R(n+(y&&e<(q+v)/2?.5:1));return}}},O=f(e=>{C(e)}),k=f(e=>{C(e)}),H=f(()=>{c||l||j(i.current)});G(o,e=>{e.on(J,L),e.on(K,O),e.on(Q,H),e.on(U,k)},{pan:!0,direction:"horizontal",lockDirection:!0,tap:!0}),a.useEffect(()=>{R(d)},[d,u.current]);const M=W("s-rate",{"s-rate-disabled":l,"s-rate-readonly":c},P),X={fontSize:A,...V};return s("div",{..._,className:M,style:X,ref:o,children:Array(S).fill(0).map((e,t)=>{const r=t+1;return Y("div",{className:"s-rate-item",style:{marginLeft:r!==1?b:""},ref:n=>w(t,n),children:[s("div",{className:"s-rate-star-void",style:{color:T},children:B??s(N,{prefix:"si",name:"star"})}),s("div",{className:"s-rate-star",style:{color:I},ref:n=>x(t,n),children:z??s(N,{prefix:"si",name:"star-fill"})})]},r)})})};export{ne as R};
