import{r,a as C,j as Vt}from"./index-093297df.js";import{c as vt}from"./index-2e4736b8.js";import{m as S,r as V,e as k,j as W,n as $,o as tt,p as et}from"./index-c0b255c8.js";const Nt="vertical",kt="horizontal",Et=st=>{const{className:nt,value:i,defaultValue:O,min:n=0,max:c=100,step:h=1,range:o=!1,vertical:a=!1,disabled:m=!1,readOnly:R=!1,pieceColor:rt="",trackColor:at="",trackSize:x="",thumbColor:ct="",thumbSize:D="",startThumb:z,endThumb:A,onAfterChange:P,onChange:w,...ot}=st,[lt,M]=r.useState(!1),I=r.useRef(),B=r.useRef(0),_=r.useRef(0),L=r.useRef(0),H=r.useRef(0),b=r.useRef(!1),X=t=>()=>S(V((o?i??O??[n,n]:[n,i??O??n])[t],h),n,c),[g,Y]=r.useState(X(0)),[p,Z]=r.useState(X(1)),q=r.useRef({start:g,end:p}),u=r.useRef({start:g,end:p}),y=r.useRef({start:0,end:0});r.useEffect(()=>{if(i==null)return;let[t,e]=o?i:[n,i];t=S(V(t,h),n,c),e=S(V(e,h),n,c),Object.assign(u.current,{start:t,end:e}),Y(t),Z(e)},[i,o,n,c]);const[F,it]=r.useMemo(()=>{const t=c-n,e=(g-n)/t,s=(p-n)/t;return Object.assign(y.current,{start:e,end:s}),[e,s]},[g,p,n,c]),E=k(({x:t,y:e})=>{if(m||R)return;Object.assign(q.current,u.current);const s=I.current.getBoundingClientRect(),d=B.current=a?s.height:s.width,v=a?s.top:s.left,f=_.current=a?e:t,{start:l,end:N}=y.current,j=f-v;if(o){const Ct=Math.abs(j-l*d),St=Math.abs(j-N*d);b.current=Ct<St}L.current=j/d,H.current=b.current?l:N,M(!0)}),G=t=>{t=S(V(t,h/(c-n)),0,1);let{start:e,end:s}=y.current;o?b.current?t>=s?(e=s,s=t,b.current=!1):e=t:t<e?(s=e,e=t,b.current=!0):s=t:s=t;const d=c-n,v=N=>S(V(N*d+n,h),n,c),f=v(e),l=v(s);(u.current.start!==f||u.current.end!==l)&&(Object.assign(u.current,{start:f,end:l}),i==null&&(Y(f),Z(l)),w==null||w(o?[f,l]:l))},J=k(({x:t,y:e})=>{if(m||R)return;const d=((a?e:t)-_.current)/B.current+H.current;G(d)}),T=k(()=>{if(m||R)return;M(!1);const{start:t,end:e}=q.current;(u.current.start!==t||u.current.end!==e)&&(P==null||P(o?[t,e]:e))}),K={pan:!0,direction:a?Nt:kt,lockDirection:!1},ut=W(t=>{t.on($,E),t.on(tt,J),t.on(et,T)},K),dt=W(t=>{t.on($,E),t.on(tt,J),t.on(et,T)},K),ft=k(t=>{if(m||R)return;const{clientX:e,clientY:s}=t;E({x:e,y:s}),G(L.current),T()}),ht={width:a?x:"",height:a?"":x,backgroundColor:at},mt=F*100+"%",Rt=(it-F)*100+"%",bt={[a?"top":"left"]:mt,[a?"height":"width"]:Rt,backgroundColor:rt},gt={width:D,height:D,backgroundColor:ct},pt=vt("s-slider",{"s-slider-is-down":lt,"s-slider-vertical":a,"s-slider-disabled":m,"s-slider-readonly":R},nt),Q=()=>C("div",{className:"s-slider-thumb",style:gt}),U=t=>t.stopPropagation();return C("div",{...ot,className:pt,children:C("div",{ref:I,className:"s-slider-track",style:ht,onClick:ft,children:Vt("div",{className:"s-slider-track-piece",style:bt,children:[o&&C("div",{...ut,className:"s-slider-thumb-container s-slider-thumb-container-start",onClick:U,children:z?z(g):Q()}),C("div",{...dt,className:"s-slider-thumb-container s-slider-thumb-container-end",onClick:U,children:A?A(p):Q()})]})})})};export{Et as S};
