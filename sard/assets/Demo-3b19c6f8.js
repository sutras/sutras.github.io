import{r as t,c as U,a as l,j as $}from"./index-b8e75f22.js";import{C as X,p as Z}from"./index.es-833d515d.js";const D="entering",_="entered",P="exiting",E="exited";function T(){}const q=r=>{const{children:s,in:n=!1,mountOnEnter:u=!1,unmountOnExit:f=!1,appear:N=!1,enter:x=!0,exit:v=!0,timeout:a,onEnter:c=T,onEntering:i=T,onEntered:g=T,onExit:L=T,onExiting:S=T,onExited:o=T,mergeProps:I,...H}=r,R=t.useRef(!1),k=t.useRef(!1),[d,C]=t.useState(()=>n?N?(R.current=!0,E):_:((f||u)&&(k.current=!0),E)),m=t.useRef(!1),y=t.useRef(null),e=()=>{let h,p,j;return h=p=j=a,a!==void 0&&typeof a!="number"&&(h=a.exit,p=a.enter,j=a.appear??p),{exit:h,enter:p,appear:j}},w=h=>{let p=!0;return y.current=()=>{p&&(p=!1,y.current=null,h())},y.current.cancel=()=>{p=!1},y.current},A=h=>{y.current&&(G(),m.current=!1,h?o==null||o():g==null||g())},G=()=>{y.current&&(y.current.cancel(),y.current=null)},M=(h,p)=>{setTimeout(w(p),h||0)};if(t.useEffect(()=>{if(n){if(d!==D&&d!==_){A(n),C(D),c==null||c();const h=e(),p=R.current?h.appear:x?h.enter:0;M(p,()=>{C(_)}),R.current&&(R.current=!1)}d===D&&!m.current&&(m.current=!0,i==null||i()),d===_&&m.current&&(m.current=!1,g==null||g())}else d!==P&&d!==E&&(A(n),C(P),L==null||L(),M(v?e().exit:0,()=>{C(E)})),d===P&&!m.current&&(m.current=!0,S==null||S()),d===E&&m.current&&(m.current=!1,o==null||o())}),t.useEffect(()=>(k.current=!1,G),[]),k.current||d===E&&f)return null;if(typeof s=="function")return s(d,H);if(!s)return null;const O=t.Children.only(s);return t.cloneElement(O,I?I(O.props,H):H)};function b(r){const s=t.useRef();return s.current=r,t.useCallback((...n)=>{const u=s.current;return u==null?void 0:u(...n)},[])}const z=r=>{const{className:s,style:n,children:u,visible:f,duration:N=500,onEnter:x,onEntering:v,onEntered:a,onExit:c,onExiting:i,onExited:g,...L}=r,S=t.useRef(0),o=t.useRef(null),I=b(()=>{x==null||x()}),H=b(()=>{const e=o.current;if(e){e.classList.add("doc-show");const w=e.offsetHeight;e.style.height="0px",e.offsetHeight,e.style.height=w+"px",e.classList.add("doc-collapsing")}v==null||v()}),R=b(()=>{const e=o.current;e&&(e.classList.remove("doc-collapsing"),e.style.height=""),a==null||a()}),k=b(()=>{c==null||c()}),d=b(()=>{const e=o.current;if(e){const w=e.offsetHeight;e.style.height=w+"px",e.offsetHeight,e.style.height="0px",e.classList.add("doc-collapsing")}i==null||i()}),C=b(()=>{const e=o.current;e&&(e.classList.remove("doc-show","doc-collapsing"),e.style.height=""),g==null||g()});t.useEffect(()=>(f&&o.current&&o.current.classList.add("doc-show"),()=>{clearTimeout(S.current)}),[]);const m=U("doc-collapse",s),y={...n,transitionDuration:N+"ms"};return l(q,{...L,timeout:N,in:f,onEnter:I,onEntering:H,onEntered:R,onExit:k,onExiting:d,onExited:C,children:l("div",{ref:o,className:m,style:y,children:u})})};function V(r){const{code:s}=r,[n,u]=t.useState(!1),f=t.useRef(),N=t.useRef(null),x=t.useRef(0),[v,a]=t.useState(!1);return t.useEffect(()=>{let c;return f.current&&(c=new X(f.current,{text:()=>{var i;return(i=N.current)==null?void 0:i.textContent}}),c.on("success",()=>{a(!0),clearTimeout(x.current),x.current=setTimeout(()=>{a(!1)},1e3)})),()=>{var i;return(i=c==null?void 0:c.destroy)==null?void 0:i.call(c)}},[]),$("div",{className:"doc-code",children:[l("div",{className:"doc-code-header",children:$("div",{className:"doc-code-tool",children:[$("div",{className:"doc-code-tool-item",title:"复制",ref:f,children:[l("span",{className:"doc-code-tool-icon bi-files"}),v&&l("div",{className:"doc-code-copy-success",children:"复制成功"})]}),l("div",{className:"doc-code-tool-item",title:n?"收起代码":"显示代码",onClick:()=>u(!n),children:l("span",{className:"doc-code-tool-icon bi-code-square"})})]})}),l(z,{visible:n,children:l("div",{className:"doc-code-body",children:l("pre",{className:"language-jsx",children:l("code",{className:"language-jsx",ref:N,dangerouslySetInnerHTML:{__html:s}})})})})]})}function B(r){return r.replace(/[^a-zA-Z0-9]/g,"-").replace(/-+/g,"-").toLowerCase()}const{pinyin:F}=Z;function J(r){return r.replace(/<h([123])>(.*?)<\/h\1>/g,(s,n,u)=>{const f=B(F(u,{toneType:"none",nonZh:"consecutive"})),N=`<a class="doc-anchor" href="#${f}">#</a>`;return`<h${n} id="${f}">${u}${N}</h${n}>`})}function W({children:r}){const{doc:s}=r;return $("div",{className:"doc-card",children:[l("div",{dangerouslySetInnerHTML:{__html:J(s.doc)}}),l("div",{className:"doc-demo",children:t.createElement(r)}),l(V,{code:s.code})]})}export{W as D};
