import{r as a,a as s,j as G}from"./index-093297df.js";import{c as J}from"./index-2e4736b8.js";import{i as K,e as u,j as Q,n as U,o as W,p as Y,q as Z,I as N}from"./index-c0b255c8.js";const ce=R=>{const{className:P,style:V,children:$,value:ee,defaultValue:te,allowHalf:g,allowClear:S,count:E=5,size:A,spacing:b,icon:B,voidIcon:j,color:I,voidColor:T,readOnly:c,disabled:o,onChange:re,..._}=R,[f,w]=K(R,{defaultValue:0}),y=a.useRef(0),d=a.useRef(),m=a.useRef([]),h=a.useRef([]),z=(e,t)=>{e===0&&(h.current=[]),h.current[e]=t},l=a.useRef([]),x=(e,t)=>{e===0&&(l.current=[]),l.current[e]=t},i=a.useRef(f),D=()=>{l.current.forEach((e,t)=>{const r=t+1-i.current;e.style.width=(r<=0?1:r>1?0:i.current%1)+"em"})},p=e=>{i.current=e,D()},L=u(()=>{c||o||(d.current&&(y.current=d.current.getBoundingClientRect().left),m.current=[],h.current.forEach((e,t)=>{const r=e.getBoundingClientRect();m.current[t]=[r.left,r.right]}))}),C=({x:e})=>{if(c||o)return;const t=e-y.current,r=m.current;if(t<0){p(S?0:g?.5:1);return}for(let n=r.length-1;n>=0;n--){const[v,F]=r[n];if(e>=v){p(n+(g&&e<(F+v)/2?.5:1));return}}},O=u(e=>{C(e)}),k=u(e=>{C(e)}),q=u(()=>{c||o||w(i.current)}),H=Q(e=>{e.on(U,L),e.on(W,O),e.on(Y,q),e.on(Z,k)},{pan:!0,direction:"horizontal",lockDirection:!0,tap:!0});a.useEffect(()=>{p(f)},[f,l.current]);const M=J("s-rate",{"s-rate-disabled":o,"s-rate-readonly":c},P),X={fontSize:A,...V};return s("div",{..._,...H,className:M,style:X,ref:d,children:Array(E).fill(0).map((e,t)=>{const r=t+1;return G("div",{className:"s-rate-item",style:{marginLeft:r!==1?b:""},ref:n=>z(t,n),children:[s("div",{className:"s-rate-star-void",style:{color:T},children:j??s(N,{prefix:"si",name:"star"})}),s("div",{className:"s-rate-star",style:{color:I},ref:n=>x(t,n),children:B??s(N,{prefix:"si",name:"star-fill"})})]},r)})})};export{ce as R};
