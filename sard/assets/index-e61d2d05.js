import{r as a,a as s,j as F}from"./index-b9ddf759.js";import{c as G}from"./index-2e4736b8.js";import{u as J,f,g as K,j as Q,k as U,l as W,n as Y,I as N}from"./index-cef2ca44.js";const se=R=>{const{className:P,style:V,children:Z,value:$,defaultValue:ee,allowHalf:g,allowClear:S,count:E=5,size:A,spacing:b,icon:j,voidIcon:B,color:I,voidColor:T,readOnly:c,disabled:o,onChange:te,..._}=R,[d,w]=J(R,{defaultValue:0}),y=a.useRef(0),l=a.useRef(),m=a.useRef([]),h=a.useRef([]),z=(e,t)=>{e===0&&(h.current=[]),h.current[e]=t},u=a.useRef([]),k=(e,t)=>{e===0&&(u.current=[]),u.current[e]=t},i=a.useRef(d),x=()=>{u.current.forEach((e,t)=>{const r=t+1-i.current;e.style.width=(r<=0?1:r>1?0:i.current%1)+"em"})},p=e=>{i.current=e,x()},D=f(()=>{c||o||(l.current&&(y.current=l.current.getBoundingClientRect().left),m.current=[],h.current.forEach((e,t)=>{const r=e.getBoundingClientRect();m.current[t]=[r.left,r.right]}))}),C=({x:e})=>{if(c||o)return;const t=e-y.current,r=m.current;if(t<0){p(S?0:g?.5:1);return}for(let n=r.length-1;n>=0;n--){const[v,q]=r[n];if(e>=v){p(n+(g&&e<(q+v)/2?.5:1));return}}},L=f(e=>{C(e)}),O=f(e=>{C(e)}),H=f(()=>{c||o||w(i.current)});K(l,e=>{e.on(Q,D),e.on(U,L),e.on(W,H),e.on(Y,O)},{pan:!0,direction:"horizontal",lockDirection:!0,tap:!0}),a.useEffect(()=>{p(d)},[d,u.current]);const M=G("s-rate",{"s-rate-disabled":o,"s-rate-readonly":c},P),X={fontSize:A,...V};return s("div",{..._,className:M,style:X,ref:l,children:Array(E).fill(0).map((e,t)=>{const r=t+1;return F("div",{className:"s-rate-item",style:{marginLeft:r!==1?b:""},ref:n=>z(t,n),children:[s("div",{className:"s-rate-star-void",style:{color:T},children:B??s(N,{prefix:"si",name:"star"})}),s("div",{className:"s-rate-star",style:{color:I},ref:n=>k(t,n),children:j??s(N,{prefix:"si",name:"star-fill"})})]},r)})})};export{se as R};
